From e63f9ebed8af03840702f1663d0c3537a5963949 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?S=C3=B6nke=20Liebau?= <soenke.liebau@stackable.tech>
Date: Tue, 8 Apr 2025 14:05:23 +0200
Subject: Bump parquet-avro to 1.15.1 to get rid of CVE-2025-30065

---
 plugin/trino-iceberg/pom.xml | 11 +++++++++++
 pom.xml                      |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/plugin/trino-iceberg/pom.xml b/plugin/trino-iceberg/pom.xml
index ed04e195a1..5a2da9bd86 100644
--- a/plugin/trino-iceberg/pom.xml
+++ b/plugin/trino-iceberg/pom.xml
@@ -232,6 +232,17 @@
         <dependency>
             <groupId>org.apache.iceberg</groupId>
             <artifactId>iceberg-parquet</artifactId>
+            <exclusions>
+                <exclusion>
+                    <groupId>org.apache.parquet</groupId>
+                    <artifactId>parquet-avro</artifactId>
+                </exclusion>
+            </exclusions>
+        </dependency>
+        <dependency>
+            <groupId>org.apache.parquet</groupId>
+            <artifactId>parquet-avro</artifactId>
+            <version>1.15.1</version>
         </dependency>
 
         <dependency>
diff --git a/pom.xml b/pom.xml
index 3f9f794504..ca6c2f28bb 100644
--- a/pom.xml
+++ b/pom.xml
@@ -205,7 +205,7 @@
         <dep.jts.version>1.20.0</dep.jts.version>
         <dep.kafka-clients.version>3.9.0</dep.kafka-clients.version>
         <dep.okio.version>3.10.2</dep.okio.version>
-        <dep.parquet.version>1.15.0</dep.parquet.version>
+        <dep.parquet.version>1.15.1</dep.parquet.version>
         <dep.plugin.failsafe.version>${dep.plugin.surefire.version}</dep.plugin.failsafe.version>
         <dep.protobuf.version>3.25.6</dep.protobuf.version>
         <dep.snowflake.version>3.22.0</dep.snowflake.version>
