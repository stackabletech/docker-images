From 24a0779c5e24caec82d23988f0b4b026e4bc7c8c Mon Sep 17 00:00:00 2001
From: dervoeti <lukas.krug@stackable.tech>
Date: Thu, 13 Mar 2025 22:01:52 +0100
Subject: Fix CVE-2023-34455

See https://github.com/stackabletech/vulnerabilities/issues/558
---
 phoenix-core-client/pom.xml    | 6 ++++++
 phoenix-core-server/pom.xml    | 8 +++++++-
 phoenix-pherf/pom.xml          | 6 ++++++
 phoenix-tracing-webapp/pom.xml | 6 ++++++
 pom.xml                        | 7 +++++++
 5 files changed, 32 insertions(+), 1 deletion(-)

diff --git a/phoenix-core-client/pom.xml b/phoenix-core-client/pom.xml
index eaf92a75e..cbbebc9d5 100644
--- a/phoenix-core-client/pom.xml
+++ b/phoenix-core-client/pom.xml
@@ -233,6 +233,12 @@
       <groupId>org.apache.hadoop</groupId>
       <artifactId>hadoop-auth</artifactId>
     </dependency>
+    <!-- Fix CVE-2023-34455 -->
+    <dependency>
+      <groupId>org.xerial.snappy</groupId>
+      <artifactId>snappy-java</artifactId>
+      <version>1.1.10.4</version>
+    </dependency>
 
     <!-- HBase dependencies -->
     <dependency>
diff --git a/phoenix-core-server/pom.xml b/phoenix-core-server/pom.xml
index bb582d408..61cfeef6d 100644
--- a/phoenix-core-server/pom.xml
+++ b/phoenix-core-server/pom.xml
@@ -59,6 +59,12 @@
             <groupId>org.apache.hadoop</groupId>
             <artifactId>hadoop-mapreduce-client-core</artifactId>
         </dependency>
+        <!-- Fix CVE-2023-34455 -->
+        <dependency>
+          <groupId>org.xerial.snappy</groupId>
+          <artifactId>snappy-java</artifactId>
+          <version>1.1.10.4</version>
+        </dependency>
 
         <!-- HBase dependencies -->
         <dependency>
@@ -192,4 +198,4 @@
             </plugin>
         </plugins>
     </build>
-</project>
\ No newline at end of file
+</project>
diff --git a/phoenix-pherf/pom.xml b/phoenix-pherf/pom.xml
index 787137edc..017cb5dd5 100644
--- a/phoenix-pherf/pom.xml
+++ b/phoenix-pherf/pom.xml
@@ -159,6 +159,12 @@
       <groupId>org.apache.hbase</groupId>
       <artifactId>hbase-server</artifactId>
     </dependency>
+    <!-- Fix CVE-2023-34455 -->
+    <dependency>
+      <groupId>org.xerial.snappy</groupId>
+      <artifactId>snappy-java</artifactId>
+      <version>1.1.10.4</version>
+    </dependency>
 
     <!-- Test Dependencies -->
     <dependency>
diff --git a/phoenix-tracing-webapp/pom.xml b/phoenix-tracing-webapp/pom.xml
index 681e68043..3f28979e7 100755
--- a/phoenix-tracing-webapp/pom.xml
+++ b/phoenix-tracing-webapp/pom.xml
@@ -89,6 +89,12 @@
         <groupId>org.apache.hbase</groupId>
         <artifactId>hbase-common</artifactId>
       </dependency>
+      <!-- Fix CVE-2023-34455 -->
+      <dependency>
+        <groupId>org.xerial.snappy</groupId>
+        <artifactId>snappy-java</artifactId>
+        <version>1.1.10.4</version>
+      </dependency>
     </dependencies>
 
     <build>
diff --git a/pom.xml b/pom.xml
index f8534b4ad..ec98a082a 100644
--- a/pom.xml
+++ b/pom.xml
@@ -892,6 +892,13 @@
           </exclusion>
         </exclusions>
       </dependency>
+      <!-- Fix CVE-2023-34455 -->
+      <dependency>
+        <groupId>org.xerial.snappy</groupId>
+        <artifactId>snappy-java</artifactId>
+        <version>1.1.10.4</version>
+      </dependency>
+
       <dependency>
         <groupId>org.apache.hadoop</groupId>
         <artifactId>hadoop-common</artifactId>
