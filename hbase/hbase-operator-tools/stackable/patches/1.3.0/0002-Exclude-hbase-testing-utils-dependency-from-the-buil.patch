From 6eedb5a2a3db365ce9cd4574dd8bee32a444c53f Mon Sep 17 00:00:00 2001
From: Andrew Kenworthy <andrew.kenworthy@stackable.tech>
Date: Mon, 9 Feb 2026 18:21:26 +0100
Subject: Exclude hbase testing utils dependency from the build

---
 hbase-hbck2/pom.xml | 9 +++++++--
 hbase-tools/pom.xml | 5 +++--
 2 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/hbase-hbck2/pom.xml b/hbase-hbck2/pom.xml
index 69af92e..5bfad33 100644
--- a/hbase-hbck2/pom.xml
+++ b/hbase-hbck2/pom.xml
@@ -114,12 +114,17 @@
         </exclusion>
       </exclusions>
     </dependency>
-    <dependency>
+    <!-- Starting with Hbase 2.6.2, this brings in a dependency that is not publicly available:
+        org.apache.directory.jdbm:apacheds-jdbm1:bundle:2.0.0-M2
+
+      Since we do not run the tests, we exclude this dependency.
+
+      To build successfully we also need to use -Dmaven.test.skip=true to skip building the tests.
+    -->
+    <!-- dependency>
       <groupId>org.apache.hbase</groupId>
       <artifactId>hbase-testing-util</artifactId>
       <version>${hbase.version}</version>
       <scope>test</scope>
-    </dependency>
+    </dependency -->
     <dependency>
       <groupId>org.mockito</groupId>
       <artifactId>mockito-core</artifactId>
diff --git a/hbase-tools/pom.xml b/hbase-tools/pom.xml
index f9d94e8..3b9da09 100644
--- a/hbase-tools/pom.xml
+++ b/hbase-tools/pom.xml
@@ -103,12 +103,13 @@
         </exclusion>
       </exclusions>
     </dependency>
-    <dependency>
+    <!-- See the hbase-hbck2/pom.xml for an explanation of why this is commented out -->
+    <!-- dependency>
       <groupId>org.apache.hbase</groupId>
       <artifactId>hbase-testing-util</artifactId>
       <version>${hbase.version}</version>
       <scope>test</scope>
-    </dependency>
+    </dependency -->
     <dependency>
       <groupId>org.mockito</groupId>
       <artifactId>mockito-core</artifactId>
